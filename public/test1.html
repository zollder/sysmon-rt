<!DOCTYPE html>
<html>
	<head>
		<script src="bower_components/d3/d3.js" charset="UTF-8"></script>
		<script src="bower_components/angular/angular.js" charset="UTF-8"></script>
<!-- 		<script type="text/javascript">
		
		      // Application Module 
		      angular.module('myApp', [])
	
		      // Main application controller
		      .controller('MainCtrl', ["$scope", "$http", function ($scope, $http) {
		    	  var logdata;
		    	  var url = "files/access.log";
		    	  $http.get(url).then(function(response) {
		    		  logdata = response.data;
		    		  console.log(logdata);
		    		  
			    	  var lines = logdata.trim().split("\n").map(function(line) {
			    		  return line.split(/[-"]/gi).map(function(element) {
			    			  return element.trim().replace(/["\[\]]/gi, '');
			    		  });
			    	  });
			    	  console.log(lines);
			    	  
			    	  var parseTime = d3.timeParse("%d/%b/%Y:%H:%M:%S %Z");
			    	  lines = lines.map(function(items) {
			    		  return {
			    			  ip: items[0],
			    			  time: parseTime(items[2]),
			    			  request: items[3],
			    			  status: items[4],
			    			  agent: items[8]
			    		  };
			    	  });
			    	  console.log(lines);
		          });
		      }]);
		</script> -->
		<style type="text/css">
			path {
				stroke: steelblue;
				stroke-width: 2;
				fill: steelblue;
				fill-opacity: 0.3;
			}
			circle {
				stroke: none;
			}
		</style>
	</head>
	<!-- <body ng-controller="MainCtrl"> -->
	<body>
		<script type="text/javascript">
		
			var svg = d3.select("body").append("svg")
				.attr("width", 800)
				.attr("height", 800);

			var circle = svg.append("circle")
				.attr("cx", 100)
				.attr("cy", 100)
				.attr("r", 50);
			
			var events = [
				'click', 'dblclick',
				'mouseover', 'mouseenter', 'mouseleave',
				'mousemove', 'mousedown', 'mouseup'
            ];
			
			events.map(function(event) {
				circle.on(event, function() {
					console.log("Triggered", d3.event.type);
				});
			});
			
/* 			svg.on('click', function() {
				var e = d3.event;
				
				// Get relative cursor position
				var xpos = (e.offsetX==undefined) ? e.layerX : e.offsetX;
				var ypos = (e.offsetY==undefined) ? e.layerY : e.offsetY;
				
				svg.append("circle")
					.attr("cx", xpos)
					.attr("cy", ypos)
					.style("fill", "steelblue")
					.attr("r", 50);
			}); */
			
/* 			var blue = d3.rgb(0,0,255);
			var red = d3.rgb(255,0,0);
			var duration = 2500; //ms
			var elementsPerRow = 15;

			var data = [];
			for (var i=0; i<105; i++) {
				data.push(i);
			}
			
			var circles = svg.selectAll("circle")
				.data(data)
				.enter()
				.append("circle")
				.attr("class", "frame")
				.attr("cx", function(d,i) { return (i%elementsPerRow + 1)*50; })
				.attr("cy", function(d,i) { return Math.floor(i/elementsPerRow + 1)*50; })
				.attr("r", 25);
			
			circles
				.style("fill", blue)
				.transition()
				.delay(function(d,i) { return i*100; })
				.duration(duration)
				.on("end", function() {
					d3.select(this).transition().attr("r", 15);
				})
				.style("fill", red); */

/*
			var svg = d3.select("body").append("svg")
				.attr("width", 800)
				.attr("height", 800);
			
			var circle = svg.append("circle")
				.attr("class", "frame")
				.attr("cx", 50)
				.attr("cy", 50)
				.attr("r", 25);
			
			var interpolate = d3.interpolateRgb(blue, red);	// 60FPS
			var blue = d3.rgb(0,0,255);
			var red = d3.rgb(255,0,0);
			
			var duration = 2500; //ms
 			var tickFn = function(elapsed) {
				var t = elapsed/duration;
				// Frame 0
				if (t <= 1.0)
					circle.style("fill", interpolate(t));
				else {
					circle.style("fill", interpolate(1));
					return true;
				}
			}
			
			d3.timer(tickFn); */
			
			
/* 			var arcPoints =[[0, 15, 'red'], [20, 90, 'green'], [110, 180, 'orange']];
			
			var arc = d3.arc()
				.innerRadius(40)
				.outerRadius(100)
				.startAngle(function(d) { return d[0] * Math.PI/180; })
				.endAngle(function(d) { return d[1] * Math.PI/180; });
			var shape1 = svg.selectAll("path")
				.data(arcPoints)
				.enter()
				.append("path")
				.attr("d", arc)
				.style("fill", function(d) { return d[2]; })
				.attr("transform", 'translate(200,200)'); */

/*  			var points =[[15,15], [200,300], [400,100]];
			
			var area = d3.area()
				.y0(function(d) { return d[1] + 90; });
			var shape1 = svg.append("path")
				.datum(points)
				.attr("d", area.curve(d3.curveCardinal.tension(0))); */
			
/* 			var line1 = svg.append("path")
				.datum(points1)
				.style("stroke", 'green')
				.attr("d", d3.line().curve(d3.curveCardinal.tension(0)));
			
			var line1 = svg.append("path")
				.datum(points1)
				.style("stroke", 'red')
				.attr("d", d3.line().curve(d3.curveCardinal.tension(0.25)));
			
			var line1 = svg.append("path")
				.datum(points1)
				.style("stroke", 'orange')
				.attr("d", d3.line().curve(d3.curveCardinal.tension(0.5)));
			
			var points2 =[[15,415], [200,700], [400,500]]; */
			
			
/* 			var g = svg.append("g");
			
			var quadratic1 = svg.append("path")
				.attr("d", 'M15,15 Q200,300 400,100 Q500,50 800,100');
			var quadratic2 = svg.append("path")
				.attr("d", 'M15,215 Q200,500 400,300 T800,300'); */
			
/* 				var line1 = svg.append("path")
					.style("stroke", 'steelblue')
					.attr("d", 'M15,15  L100,100 300,100 400,15');

				var hline1 = svg.append("path")
					.style("stroke", 'red')
					.attr("d", 'M15,5  H400');
				
				var hline2 = svg.append("path")
					.style("stroke", 'red')
					.attr("d", 'M15,110  H400');
				
				var vline1 = svg.append("path")
					.style("stroke", 'green')
					.attr("d", 'M5,5 V110');
				
				var vline2 = svg.append("path")
					.style("stroke", 'green')
					.attr("d", 'M410,5  V110');
				
				var cubic = svg.append("path")
					.attr("d", 'M15,15 C15,300 200,15 400,200');
				
				var g = svg.append("g");
				
				g.selectAll("circle.vline")
					.data([[5,5], [5,110], [410, 5], [410, 110]])
					.enter()
					.append("circle")
					.attr("class", 'vline')
					.style("fill", 'green')
					.attr("cx", function(d) {return d[0]; })
					.attr("cy", function(d) {return d[1]; })
					.attr("r", 3);

				g.selectAll("circle.hline")
					.data([[15,5], [15,110], [400, 5], [400, 110]])
					.enter()
					.append("circle")
					.attr("class", 'vline')
					.style("fill", 'red')
					.attr("cx", function(d) {return d[0]; })
					.attr("cy", function(d) {return d[1]; })
					.attr("r", 3);

				g.selectAll("circle.hline")
					.data([[15,15], [100,100], [300, 100], [400, 15]])
					.enter()
					.append("circle")
					.attr("class", 'line')
					.style("fill", 'steelblue')
					.attr("cx", function(d) {return d[0]; })
					.attr("cy", function(d) {return d[1]; })
					.attr("r", 3); */
				
		</script>
	</body>
</html>